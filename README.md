# RebusRabbitMqBenchmark

Just a little benchmark thing that checks send/publish speed with Rebus on RabbitMQ.

Benchmarks will run for all combinations of 1, 10, 100, 1000 messages, with/without Rebus' express header, on local and remote RabbitMQ instances.

Here are the results:

``` ini

BenchmarkDotNet=v0.13.1, OS=Windows 10.0.19044.1826 (21H2)
Intel Core i7-8700K CPU 3.70GHz (Coffee Lake), 1 CPU, 12 logical and 6 physical cores
.NET SDK=7.0.100-preview.6.22352.1
  [Host]     : .NET 6.0.7 (6.0.722.32202), X64 RyuJIT
  Job-MTQXGW : .NET 6.0.7 (6.0.722.32202), X64 RyuJIT

InvocationCount=1  UnrollFactor=1  

```
|       Method | MessagesToPublish | UseRemoteRabbitMq | UseExpress |             Mean |          Error |        StdDev |           Median |              Min |             Max |
|------------- |------------------ |------------------ |----------- |-----------------:|---------------:|--------------:|-----------------:|-----------------:|----------------:|
| **SendMessages** |                 **1** |             **False** |      **False** |      **4,854.30 μs** |     **205.830 μs** |     **590.57 μs** |      **4,698.50 μs** |      **3,629.80 μs** |      **6,374.0 μs** |
| **SendMessages** |                 **1** |             **False** |       **True** |         **85.13 μs** |       **9.671 μs** |      **28.06 μs** |         **71.30 μs** |         **48.50 μs** |        **169.6 μs** |
| **SendMessages** |                 **1** |              **True** |      **False** |     **42,687.45 μs** |     **632.375 μs** |     **560.58 μs** |     **42,499.85 μs** |     **42,184.20 μs** |     **44,212.7 μs** |
| **SendMessages** |                 **1** |              **True** |       **True** |         **84.85 μs** |      **10.642 μs** |      **30.88 μs** |         **70.05 μs** |         **47.55 μs** |        **174.4 μs** |
| **SendMessages** |                **10** |             **False** |      **False** |     **19,795.14 μs** |     **458.552 μs** |   **1,293.35 μs** |     **19,796.50 μs** |     **16,132.80 μs** |     **23,765.5 μs** |
| **SendMessages** |                **10** |             **False** |       **True** |        **236.16 μs** |      **14.574 μs** |      **40.63 μs** |        **226.00 μs** |        **178.50 μs** |        **356.1 μs** |
| **SendMessages** |                **10** |              **True** |      **False** |    **422,666.95 μs** |   **3,452.329 μs** |   **2,882.85 μs** |    **422,308.80 μs** |    **418,075.60 μs** |    **428,786.8 μs** |
| **SendMessages** |                **10** |              **True** |       **True** |        **222.43 μs** |      **12.218 μs** |      **35.06 μs** |        **218.00 μs** |        **141.10 μs** |        **305.0 μs** |
| **SendMessages** |               **100** |             **False** |      **False** |    **151,661.01 μs** |   **4,065.662 μs** |  **11,467.27 μs** |    **148,554.95 μs** |    **133,644.80 μs** |    **184,922.9 μs** |
| **SendMessages** |               **100** |             **False** |       **True** |      **1,636.05 μs** |      **95.336 μs** |     **276.59 μs** |      **1,606.90 μs** |      **1,072.50 μs** |      **2,295.5 μs** |
| **SendMessages** |               **100** |              **True** |      **False** |  **3,907,092.06 μs** |  **15,538.773 μs** |  **13,774.72 μs** |  **3,904,548.85 μs** |  **3,892,563.55 μs** |  **3,941,198.5 μs** |
| **SendMessages** |               **100** |              **True** |       **True** |      **1,357.77 μs** |      **47.439 μs** |     **134.58 μs** |      **1,358.00 μs** |        **996.30 μs** |      **1,639.4 μs** |
| **SendMessages** |              **1000** |             **False** |      **False** |  **1,444,268.90 μs** |  **28,651.335 μs** |  **58,527.09 μs** |  **1,438,041.40 μs** |  **1,323,592.60 μs** |  **1,570,884.6 μs** |
| **SendMessages** |              **1000** |             **False** |       **True** |     **13,251.05 μs** |     **630.965 μs** |   **1,840.55 μs** |     **12,972.50 μs** |      **9,496.40 μs** |     **17,786.0 μs** |
| **SendMessages** |              **1000** |              **True** |      **False** | **42,631,822.35 μs** | **216,419.328 μs** | **202,438.77 μs** | **42,655,999.40 μs** | **42,304,726.10 μs** | **42,971,410.1 μs** |
| **SendMessages** |              **1000** |              **True** |       **True** |     **12,943.64 μs** |     **377.540 μs** |   **1,083.23 μs** |     **12,928.30 μs** |     **10,141.50 μs** |     **15,370.8 μs** |
